<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reklamalar</title>

  <!-- Tailwind (+ forms) -->
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          keyframes: {
            'slide-in-left': {'0%': { transform: 'translateX(-100%)', opacity: '0' }, '100%': { transform: 'translateX(0)', opacity: '1' }},
            'slide-out-left': {'0%': { transform: 'translateX(0)', opacity: '1' }, '100%': { transform: 'translateX(-100%)', opacity: '0' }},
            'fade-in-up': {'0%': { opacity: '0', transform: 'translateY(8px) scale(.98)' }, '100%': { opacity: '1', transform: 'translateY(0) scale(1)' }},
            'scale-in': {'0%': { opacity: '0', transform: 'scale(.96)' }, '100%': { opacity: '1', transform: 'scale(1)' }},
            'slide-up': {'0%': { transform: 'translateY(10px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' }},
            'fade-out': { '0%': { opacity: '1' }, '100%': { opacity: '0' } }
          },
          animation: {
            'slide-in-left': 'slide-in-left .32s cubic-bezier(.22,1,.36,1) both',
            'slide-out-left': 'slide-out-left .26s cubic-bezier(.4,0,.2,1) both',
            'fade-in-up': 'fade-in-up .35s cubic-bezier(.22,1,.36,1) both',
            'scale-in': 'scale-in .24s cubic-bezier(.22,1,.36,1) both',
            'slide-up': 'slide-up .28s cubic-bezier(.22,1,.36,1) both',
            'fade-out': 'fade-out .2s ease both'
          }
        }
      }
    };
  </script>

  <!-- Boshlanishda dark rejimni qo'llash -->
  <script>
    if (
      localStorage.theme === 'dark' ||
      (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) { document.documentElement.classList.add('dark'); }
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --switch-on:#4f46e5; --switch-on-dark:#6366f1;
      --switch-off:#d1d5db; --switch-off-dark:#4b5563;
      --knob-shadow:0 2px 6px rgba(0,0,0,.25);
      --focus-ring:0 0 0 3px rgba(99,102,241,.35);

      --sidebar-w:16rem;               /* w-64 */
      --easing:cubic-bezier(.22,1,.36,1);
    }

    /* ========= iOS-style switch ========= */
    .switch{ --h:26px; --w:50px; --p:3px; position:relative; display:inline-flex; align-items:center; }
    .switch > input{ position:absolute!important; opacity:0!important; width:0!important; height:0!important; pointer-events:none!important; appearance:none!important; border:none!important; outline:none!important; }
    .switch-ui{ width:var(--w); height:var(--h); border-radius:9999px; background:var(--switch-off); transition: background .2s ease, box-shadow .2s ease; display:inline-block; position:relative; }
    .dark .switch-ui{ background:var(--switch-off-dark); }
    .switch-ui::before{ content:""; position:absolute; top:var(--p); left:var(--p); width:calc(var(--h) - var(--p)*2); height:calc(var(--h) - var(--p)*2); background:#fff; border-radius:9999px; box-shadow:var(--knob-shadow); transform:translateX(0); transition: transform .2s ease; }
    .switch > input:checked + .switch-ui{ background:var(--switch-on); }
    .dark .switch > input:checked + .switch-ui{ background:var(--switch-on-dark); }
    .switch > input:checked + .switch-ui::before{ transform:translateX(calc(var(--w) - var(--h))); }
    .switch > input:focus-visible + .switch-ui{ box-shadow:var(--focus-ring); }
    .switch-sm{ --h:22px; --w:42px; --p:2px; }
    .switch-lg{ --h:30px; --w:56px; --p:3px; }

    /* Preview qutisi effekt */
    .preview-box{ transition: box-shadow .2s, border-color .2s, transform .25s; }
    .preview-box:hover{ box-shadow:0 8px 18px rgba(0,0,0,.12); border-color:rgba(99,102,241,.55); transform:translateY(-2px); }

    /* ========= PROFESSIONAL SIDEBAR — translateX (text siqilmaydi) ========= */
    #sidebar{
      position:fixed; inset:0 auto 0 0; width:var(--sidebar-w);
      background-color: #ffffff; 
      will-change: transform, opacity;
      transform:translateX(-100%);
      opacity:0; pointer-events:none;
      transition: transform .36s var(--easing), opacity .28s ease;
      backface-visibility:hidden; -webkit-font-smoothing:antialiased;
    }
    #sidebar[data-open="true"]{ transform:translateX(0); opacity:1; pointer-events:auto; }

    .dark #sidebar{
      background-color: #111827;        /* dark: gray-900 */
    }

    /* Kontent margin-left animatsiyasi (desktopda joy ajratish) */
    #content{ transition: margin-left .36s var(--easing); }
    @media (min-width: 768px){
      body[data-sidebar-open="true"]  #content{ margin-left: var(--sidebar-w); }
      body[data-sidebar-open="false"] #content{ margin-left: 0; }
    }

    /* Overlay (mobil) animatsiyasi */
    #sidebarBackdrop{ transition: opacity .28s ease; background: rgba(0,0,0,.55);        /* biroz quyuqroq */
                      -webkit-backdrop-filter: blur(2px);
                      backdrop-filter: blur(2px); }

    /* prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce){
      #sidebar, #content, #sidebarBackdrop{ transition:none!important; }
    }
  </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex transition-colors duration-300 dark:text-white">
  <!-- Safelist helper -->
  <div class="hidden opacity-0 animate-slide-in-left animate-slide-out-left animate-fade-in-up animate-scale-in animate-slide-up"></div>

  <!-- Sidebar -->
  <aside
    id="sidebar"
    data-open="false"
    class="z-50 w-64 bg-white dark:bg-gray-900 shadow-lg flex flex-col"
    aria-hidden="true"
  >
    <div class="flex items-center gap-2 px-6 py-6 border-b border-gray-200 dark:border-gray-800">
      <div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold text-lg">EA</div>
      <span class="font-bold text-xl text-indigo-700 dark:text-indigo-300">EduWiFi Admin</span>
    </div>

    <!-- Har doim bor yopish tugmasi -->
    <button id="sidebarClose" class="p-2 m-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 active:scale-95 transition-transform" aria-label="Yopish" title="Yopish">
      <i data-lucide="x" class="w-6 h-6"></i>
    </button>

    <nav class="flex-1 px-2 py-4 overflow-y-auto">
      <a href="/admin_panel_main" class="flex items-center gap-3 px-4 py-2 rounded-lg text-gray-700 dark:text-white hover:bg-indigo-100 dark:hover:bg-indigo-900 font-semibold mb-2 transition-colors">
        <i data-lucide="home" class="w-5 h-5"></i>
        Bosh sahifa
      </a>

      <div class="group">
        <button id="wifiMenuBtn" type="button" aria-controls="wifiMenu" aria-expanded="true"
                class="flex items-center justify-between w-full px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-indigo-700 dark:text-indigo-300 font-semibold bg-indigo-100 dark:bg-indigo-900 focus:outline-none transition-colors">
          <span class="flex items-center gap-3">
            <i data-lucide="wifi" class="w-5 h-5"></i>
            WiFi lar
          </span>
          <i id="wifiMenuArrow" data-lucide="chevron-down" class="w-4 h-4 transform rotate-180 transition-transform"></i>
        </button>

        <!-- Default: ochiq (block). JS orqali animatsiyali ochilib/yopiladi -->
        <div id="wifiMenu" class="ml-8 mt-1 space-y-1 block">
          <a href="/wifi" class="flex items-center gap-2 block px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-800 text-gray-700 dark:text-white transition-colors">
            <i data-lucide="list" class="w-4 h-4"></i>
            OTM lar
          </a>

          <a href="/admin_panel_settings" class="flex items-center gap-2 block px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-800 text-gray-700 dark:text-white transition-colors">
            <i data-lucide="settings" class="w-4 h-4"></i>
            Sozlamalar
          </a>

          <!-- REKLAMALAR — AKTIV -->
          <a href="/admin_panel_ad" class="flex items-center gap-2 block px-2 py-1 rounded bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 font-semibold">
            <i data-lucide="megaphone" class="w-4 h-4"></i>
            Reklamalar
          </a>

          <a href="/admin_panel_transaction" class="flex items-center gap-2 block px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-800 text-gray-700 dark:text-white transition-colors">
            <i data-lucide="receipt-text" class="w-4 h-4"></i>
            Tranzaksiyalar
          </a>

          <a href="/admin_panel_users" class="flex items-center gap-2 block px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-800 text-gray-700 dark:text-white transition-colors">
            <i data-lucide="users" class="w-4 h-4"></i>
            Foydalanuvchilar
          </a>

          <a href="/admin_panel_tarif" class="flex items-center gap-2 block px-2 py-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-800 text-gray-700 dark:text-white transition-colors">
            <i data-lucide="layers" class="w-4 h-4"></i>
            Tarif rejalar
          </a>
        </div>
      </div>

      <a href="/teachers" class="flex items-center gap-3 px-4 py-2 rounded-lg text-gray-700 dark:text-white hover:bg-indigo-100 dark:hover:bg-indigo-900 font-semibold mb-2 transition-colors">
        <i data-lucide="graduation-cap" class="w-5 h-5"></i>
        O'qituvchilar
      </a>

      <a href="/admin_panel_monitoring" class="flex items-center gap-3 px-4 py-2 rounded-lg text-gray-700 dark:text-white hover:bg-indigo-100 dark:hover:bg-indigo-900 font-semibold mb-2 transition-colors">
        <i data-lucide="users" class="w-5 h-5"></i>
        Monitoring
      </a>
    </nav>
  </aside>

  <!-- Mobil overlay (faqat sm) -->
  <div id="sidebarBackdrop" class="fixed inset-0 bg-black/40 opacity-0 pointer-events-none md:hidden z-40"></div>

  <!-- Main (kontent) -->
  <div id="content" class="flex-1 flex flex-col min-h-screen">
    <!-- Topbar -->
    <header class="flex items-center justify-between bg-white dark:bg-gray-800 shadow px-8 py-4 transition-colors duration-300 animate-slide-up motion-reduce:animate-none">
      <!-- Sidebar toggle: HAR DOIM ko'rinadi -->
      <button id="sidebarToggle" class="p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 active:scale-95 transition"
              aria-label="Sidebarni ochish/yopish" aria-controls="sidebar" aria-expanded="true" title="Menyu">
        <span id="iconSidebarOpen" class="hidden"><i data-lucide="panel-left-open" class="w-6 h-6"></i></span>
        <span id="iconSidebarClose"><i data-lucide="panel-left-close" class="w-6 h-6"></i></span>
      </button>
      
      <h2 class="text-2xl font-bold text-gray-700 dark:text-white">Reklamalar</h2>

      <div class="flex items-center gap-4">
        <!-- Theme toggle -->
        <button id="themeToggle" class="w-10 h-10 rounded-full flex items-center justify-center bg-gray-200 dark:bg-gray-700 focus:outline-none active:scale-95 transition" title="Tungi/Yorug' rejim">
          <span id="themeIconSun" class="hidden"><i data-lucide="sun" class="w-6 h-6 text-gray-600 dark:text-white"></i></span>
          <span id="themeIconMoon"><i data-lucide="moon" class="w-6 h-6 text-gray-600 dark:text-white"></i></span>
        </button>

        <!-- Profile -->
        <div class="relative">
          <button id="sidebarProfileBtn" class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center focus:outline-none active:scale-95 transition" aria-haspopup="true" aria-expanded="false" title="Profil">
            <i data-lucide="user-round" class="w-6 h-6 text-gray-600 dark:text-white"></i>
          </button>
          <div id="profileMenu" class="absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded shadow-lg py-2 hidden z-50 animate-scale-in origin-top-right">
            <button id="sidebarLogoutBtn" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 transition-colors">Chiqish</button>
          </div>
        </div>
      </div>
    </header>

    <!-- Ads content -->
    <main class="flex-1 p-6 overflow-y-auto">
      <div class="max-w-7xl mx-auto space-y-8">

        <!-- Fayllar qatori -->
        <section id="header-content" class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 animate-fade-in-up motion-reduce:animate-none">
          <h3 class="text-sm font-bold mb-4 text-gray-700 dark:text-gray-200">REKLAMAR:</h3>

          <div id="fileGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
            <!-- 1 -->
            <div class="space-y-2 card-anim">
              <div class="flex items-center gap-2">
                <button class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border border-green-700/20 active:scale-95 transition"
                        onclick="document.getElementById('file1Input').click()">FAYLNI OCHISH</button>
                <button class="px-2 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 active:scale-95 transition"
                        onclick="removeFile('file1-text')" title="O'chirish">X</button>
              </div>

              <div class="preview-box h-36 sm:h-40 rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 dark:bg-gray-700 flex items-center justify-center overflow-hidden">
                <input type="file" id="file1Input" class="hidden" accept="video/*,image/*"
                       onchange="previewImage('file1Input','file1Preview','file1ImagePreview','duration1')">
                <video id="file1Preview" controls class="w-full h-full hidden rounded-xl"></video>
                <img id="file1ImagePreview" class="max-h-full object-contain hidden rounded-xl" alt="Image Preview">
              </div>

              <div class="text-center text-xs font-semibold text-gray-600 dark:text-gray-300" id="file1-text">FAYL 1</div>
            </div>

            <!-- 2 -->
            <div class="space-y-2 card-anim">
              <div class="flex items-center gap-2">
                <button class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border border-green-700/20 active:scale-95 transition"
                        onclick="document.getElementById('file2Input').click()">FAYLNI OCHISH</button>
                <button class="px-2 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 active:scale-95 transition"
                        onclick="removeFile('file2-text')" title="O'chirish">X</button>
              </div>

              <div class="preview-box h-36 sm:h-40 rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 dark:bg-gray-700 flex items-center justify-center overflow-hidden">
                <input type="file" id="file2Input" class="hidden" accept="video/*,image/*"
                       onchange="previewImage('file2Input','file2Preview','file2ImagePreview','duration2')">
                <video id="file2Preview" controls class="w-full h-full hidden rounded-xl"></video>
                <img id="file2ImagePreview" class="max-h-full object-contain hidden rounded-xl" alt="Image Preview">
              </div>

              <div class="text-center text-xs font-semibold text-gray-600 dark:text-gray-300" id="file2-text">FAYL 2</div>
            </div>

            <!-- 3 -->
            <div class="space-y-2 card-anim">
              <div class="flex items-center gap-2">
                <button class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border border-green-700/20 active:scale-95 transition"
                        onclick="document.getElementById('file3Input').click()">FAYLNI OCHISH</button>
                <button class="px-2 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 active:scale-95 transition"
                        onclick="removeFile('file3-text')" title="O'chirish">X</button>
              </div>

              <div class="preview-box h-36 sm:h-40 rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 dark:bg-gray-700 flex items-center justify-center overflow-hidden">
                <input type="file" id="file3Input" class="hidden" accept="video/*,image/*"
                       onchange="previewImage('file3Input','file3Preview','file3ImagePreview','duration3')">
                <video id="file3Preview" controls class="w-full h-full hidden rounded-xl"></video>
                <img id="file3ImagePreview" class="max-h-full object-contain hidden rounded-xl" alt="Image Preview">
              </div>

              <div class="text-center text-xs font-semibold text-gray-600 dark:text-gray-300" id="file3-text">FAYL 3</div>
            </div>

            <!-- 4 -->
            <div class="space-y-2 card-anim">
              <div class="flex items-center gap-2">
                <button class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border border-green-700/20 active:scale-95 transition"
                        onclick="document.getElementById('file4Input').click()">FAYLNI OCHISH</button>
                <button class="px-2 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 active:scale-95 transition"
                        onclick="removeFile('file4-text')" title="O'chirish">X</button>
              </div>

              <div class="preview-box h-36 sm:h-40 rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 dark:bg-gray-700 flex items-center justify-center overflow-hidden">
                <input type="file" id="file4Input" class="hidden" accept="video/*,image/*"
                       onchange="previewImage('file4Input','file4Preview','file4ImagePreview','duration4')">
                <video id="file4Preview" controls class="w-full h-full hidden rounded-xl"></video>
                <img id="file4ImagePreview" class="max-h-full object-contain hidden rounded-xl" alt="Image Preview">
              </div>

              <div class="text-center text-xs font-semibold text-gray-600 dark:text-gray-300" id="file4-text">FAYL 4</div>
            </div>

            <!-- 5 -->
            <div class="space-y-2 card-anim">
              <div class="flex items-center gap-2">
                <button class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border border-green-700/20 active:scale-95 transition"
                        onclick="document.getElementById('file5Input').click()">FAYLNI OCHISH</button>
                <button class="px-2 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300 active:scale-95 transition"
                        onclick="removeFile('file5-text')" title="O'chirish">X</button>
              </div>

              <div class="preview-box h-36 sm:h-40 rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 dark:bg-gray-700 flex items-center justify-center overflow-hidden">
                <input type="file" id="file5Input" class="hidden" accept="video/*,image/*"
                       onchange="previewImage('file5Input','file5Preview','file5ImagePreview','duration5')">
                <video id="file5Preview" controls class="w-full h-full hidden rounded-xl"></video>
                <img id="file5ImagePreview" class="max-h-full object-contain hidden rounded-xl" alt="Image Preview">
              </div>

              <div class="text-center text-xs font-semibold text-gray-600 dark:text-gray-300" id="file5-text">FAYL 5</div>
            </div>
          </div>
        </section>

        <!-- Parametrlar/jadval qismi -->
        <section id="container" class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 space-y-4 animate-fade-in-up motion-reduce:animate-none">
          <!-- 1..5 reklama qatorlari -->
          <!-- Row 1 -->
          <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
            <div class="md:col-span-3 font-semibold">1-REKLAMA DAVOMIYLIGI</div>
            <div class="md:col-span-9 flex flex-wrap items-center gap-x-4 gap-y-3">
              <label class="text-sm font-medium">Davomiyligi:</label>
              <input id="duration1" type="number" min="0" step="1"
                     class="w-24 px-2 py-1 rounded border dark:bg-gray-900 dark:border-gray-700">
              <span class="text-xs font-semibold px-3 py-1 rounded border dark:border-gray-700">SEKUND</span>

              <label class="text-sm font-medium">Boshlanish sanasi:</label>
              <input id="date_start1" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <label class="text-sm font-medium">Tugash sanasi:</label>
              <input id="date_end1" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <span class="flex-1"></span>
              <label class="switch switch-sm">
                <input id="check1" type="checkbox">
                <span class="switch-ui"></span>
              </label>
            </div>
          </div>

          <!-- Row 2 -->
          <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
            <div class="md:col-span-3 font-semibold">2-REKLAMA DAVOMIYLIGI</div>
            <div class="md:col-span-9 flex flex-wrap items-center gap-x-4 gap-y-3">
              <label class="text-sm font-medium">Davomiyligi:</label>
              <input id="duration2" type="number" min="0" step="1"
                     class="w-24 px-2 py-1 rounded border dark:bg-gray-900 dark:border-gray-700">
              <span class="text-xs font-semibold px-3 py-1 rounded border dark:border-gray-700">SEKUND</span>

              <label class="text-sm font-medium">Boshlanish sanasi:</label>
              <input id="date_start2" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <label class="text-sm font-medium">Tugash sanasi:</label>
              <input id="date_end2" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <span class="flex-1"></span>
              <label class="switch switch-sm">
                <input id="check2" type="checkbox">
                <span class="switch-ui"></span>
              </label>
            </div>
          </div>

          <!-- Row 3 -->
          <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
            <div class="md:col-span-3 font-semibold">3-REKLAMA DAVOMIYLIGI</div>
            <div class="md:col-span-9 flex flex-wrap items-center gap-x-4 gap-y-3">
              <label class="text-sm font-medium">Davomiyligi:</label>
              <input id="duration3" type="number" min="0" step="1"
                     class="w-24 px-2 py-1 rounded border dark:bg-gray-900 dark:border-gray-700">
              <span class="text-xs font-semibold px-3 py-1 rounded border dark:border-gray-700">SEKUND</span>

              <label class="text-sm font-medium">Boshlanish sanasi:</label>
              <input id="date_start3" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <label class="text-sm font-medium">Tugash sanasi:</label>
              <input id="date_end3" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <span class="flex-1"></span>
              <label class="switch switch-sm">
                <input id="check3" type="checkbox">
                <span class="switch-ui"></span>
              </label>
            </div>
          </div>

          <!-- Row 4 -->
          <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
            <div class="md:col-span-3 font-semibold">4-REKLAMA DAVOMIYLIGI</div>
            <div class="md:col-span-9 flex flex-wrap items-center gap-x-4 gap-y-3">
              <label class="text-sm font-medium">Davomiyligi:</label>
              <input id="duration4" type="number" min="0" step="1"
                     class="w-24 px-2 py-1 rounded border dark:bg-gray-900 dark:border-gray-700">
              <span class="text-xs font-semibold px-3 py-1 rounded border dark:border-gray-700">SEKUND</span>

              <label class="text-sm font-medium">Boshlanish sanasi:</label>
              <input id="date_start4" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <label class="text-sm font-medium">Tugash sanasi:</label>
              <input id="date_end4" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <span class="flex-1"></span>
              <label class="switch switch-sm">
                <input id="check4" type="checkbox">
                <span class="switch-ui"></span>
              </label>
            </div>
          </div>

          <!-- Row 5 -->
          <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
            <div class="md:col-span-3 font-semibold">5-REKLAMA DAVOMIYLIGI</div>
            <div class="md:col-span-9 flex flex-wrap items-center gap-x-4 gap-y-3">
              <label class="text-sm font-medium">Davomiyligi:</label>
              <input id="duration5" type="number" min="0" step="1"
                     class="w-24 px-2 py-1 rounded border dark:bg-gray-900 dark:border-gray-700">
              <span class="text-xs font-semibold px-3 py-1 rounded border dark:border-gray-700">SEKUND</span>

              <label class="text-sm font-medium">Boshlanish sanasi:</label>
              <input id="date_start5" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <label class="text-sm font-medium">Tugash sanasi:</label>
              <input id="date_end5" type="date"
                     class="px-3 py-2 rounded border dark:bg-gray-900 dark:border-gray-700">

              <span class="flex-1"></span>
              <label class="switch switch-sm">
                <input id="check5" type="checkbox">
                <span class="switch-ui"></span>
              </label>
            </div>
          </div>

          <hr class="my-4 border-gray-200 dark:border-gray-700">

          <!-- Pastki boshqaruvlar + saqlash -->
          <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
            <div class="flex flex-col sm:flex-row sm:items-center gap-6">
              <label class="flex items-center gap-3">
                <span class="font-semibold text-sm">REKLAMAR HOLATI</span>
                <span class="switch switch-lg">
                  <input id="reklamalarHolati" type="checkbox">
                  <span class="switch-ui"></span>
                </span>
              </label>

              <label class="flex items-center gap-3">
                <span class="font-semibold text-sm">REKLAMANI O'TKAZIB YUBORISH TUGMASI</span>
                <span class="switch switch-lg">
                  <input id="reklamaniOtkazib" type="checkbox">
                  <span class="switch-ui"></span>
                </span>
              </label>
            </div>

            <button id="saqlashBtn"
                    class="self-start lg:self-auto px-6 py-2 rounded bg-green-600 hover:bg-green-700 text-white font-semibold shadow active:scale-95 transition">
              SAQLASH
            </button>
          </div>
        </section>

        <!-- muvaffaqiyat xabari -->
        <div id="successMessage"
             class="hidden bg-green-500 text-white py-3 px-4 rounded-lg text-center font-semibold">
          SAQLANDI
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Notification -->
  <div id="notifSuccess" class="fixed top-20 right-10 z-50 bg-green-500 text-white px-6 py-3 rounded shadow-lg font-semibold text-lg opacity-0 pointer-events-none" role="status" aria-live="polite"></div>

  <!-- Sizning ishlaydigan JS faylingiz -->
  <script src="{{ url_for('static', filename='js/admin_panel_ad.js') }}"></script>

  <!-- Theme & UI JS (animatsiyalar) -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Lucide ikonlar
      if (window.lucide && lucide.createIcons) { lucide.createIcons(); }

      // ====== Theme toggle (sun/moon) ======
      const themeToggle = document.getElementById('themeToggle');
      const sunWrap = document.getElementById('themeIconSun');
      const moonWrap = document.getElementById('themeIconMoon');
      function setTheme(mode){
        if(mode==='dark'){
          document.documentElement.classList.add('dark');
          localStorage.setItem('theme','dark');
          sunWrap && sunWrap.classList.remove('hidden');
          moonWrap && moonWrap.classList.add('hidden');
        }else{
          document.documentElement.classList.remove('dark');
          localStorage.setItem('theme','light');
          sunWrap && sunWrap.classList.add('hidden');
          moonWrap && moonWrap.classList.remove('hidden');
        }
      }
      let savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      setTheme(savedTheme);
      themeToggle && themeToggle.addEventListener('click', () => {
        const next = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
        setTheme(next);
      });

      // ====== Profile dropdown & logout ======
      const profileBtn = document.getElementById('sidebarProfileBtn');
      const profileMenu = document.getElementById('profileMenu');
      if (profileBtn && profileMenu){
        profileBtn.onclick = () => {
          profileMenu.classList.toggle('hidden');
          const expanded = profileBtn.getAttribute('aria-expanded') === 'true';
          profileBtn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
          if (!profileMenu.classList.contains('hidden')) {
            profileMenu.classList.add('animate-scale-in');
          }
        };
      }
      const logoutBtn = document.getElementById('sidebarLogoutBtn');
      if (logoutBtn){
        logoutBtn.onclick = () => {
          localStorage.removeItem('loggedInUser');
          localStorage.removeItem('loginExpiration');
          window.location.href = '/admin_panel_login';
        };
      }

      // ====== Sidebar toggling: data-open + body[data-sidebar-open] ======
      const aside    = document.getElementById('sidebar');
      const toggleBtn= document.getElementById('sidebarToggle');
      const closeBtn = document.getElementById('sidebarClose');
      const backdrop = document.getElementById('sidebarBackdrop');
      const iconOpen = document.getElementById('iconSidebarOpen');  // panel-left-open
      const iconClose= document.getElementById('iconSidebarClose'); // panel-left-close
      const mql      = window.matchMedia('(min-width: 768px)');

      function isMdUp(){ return mql.matches; }
      function isOpen(){ return aside && aside.dataset.open === 'true'; }

      function updateUI(){
        const open = isOpen();
        // Ikonlar
        iconOpen && iconOpen.classList.toggle('hidden', open);
        iconClose && iconClose.classList.toggle('hidden', !open);
        // ARIA
        toggleBtn && toggleBtn.setAttribute('aria-expanded', String(open));
        // Body flag (kontent margin-left uchun)
        document.body.dataset.sidebarOpen = open ? 'true' : 'false';
        // Backdrop faqat mobil
        if (backdrop){
          const show = open && !isMdUp();
          backdrop.classList.toggle('opacity-100', show);
          backdrop.classList.toggle('pointer-events-auto', show);
          backdrop.classList.toggle('opacity-0', !show);
          backdrop.classList.toggle('pointer-events-none', !show);
        }
        // Body scroll lock (faqat mobil ochiq paytida)
        document.body.classList.toggle('overflow-hidden', open && !isMdUp());
      }

      function openSidebar(){ aside.dataset.open = 'true'; updateUI(); }
      function closeSidebar(){ aside.dataset.open = 'false'; updateUI(); }
      function toggleSidebar(){ isOpen() ? closeSidebar() : openSidebar(); }

      // Boshlang'ich holat: md+ da ochiq, mobil da yopiq
      function applyInitial(){
        aside.dataset.open = isMdUp() ? 'true' : 'false';
        updateUI();
      }
      applyInitial();

      toggleBtn  && toggleBtn.addEventListener('click', toggleSidebar);
      closeBtn   && closeBtn.addEventListener('click', closeSidebar);
      backdrop   && backdrop.addEventListener('click', closeSidebar);
      window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });
      mql.addEventListener('change', applyInitial);

      // ====== WiFi menyusi: height transition bilan silliq ======
      const wifiBtn   = document.getElementById('wifiMenuBtn');
      const wifiMenu  = document.getElementById('wifiMenu');
      const wifiArrow = document.getElementById('wifiMenuArrow');

      function collapse(el){
        if (!el || el.classList.contains('hidden')) return;
        const start = el.scrollHeight;
        el.style.height = start + 'px';
        el.style.overflow = 'hidden';
        el.style.transition = 'height .28s cubic-bezier(.22,1,.36,1), opacity .2s ease';
        requestAnimationFrame(() => {
          el.style.height = '0px';
          el.style.opacity = '0';
        });
        el.addEventListener('transitionend', function handler(){
          el.classList.add('hidden');
          el.style.removeProperty('height'); el.style.removeProperty('overflow');
          el.style.removeProperty('transition'); el.style.removeProperty('opacity');
          el.removeEventListener('transitionend', handler);
        });
      }
      function expand(el){
        if (!el || !el.classList.contains('hidden')) return;
        el.classList.remove('hidden');
        el.style.height = '0px'; el.style.overflow = 'hidden'; el.style.opacity = '0';
        el.style.transition = 'height .28s cubic-bezier(.22,1,.36,1), opacity .2s ease';
        const end = el.scrollHeight;
        requestAnimationFrame(() => {
          el.style.height = end + 'px'; el.style.opacity = '1';
        });
        el.addEventListener('transitionend', function handler(){
          el.style.removeProperty('height'); el.style.removeProperty('overflow');
          el.style.removeProperty('transition'); el.style.removeProperty('opacity');
          el.removeEventListener('transitionend', handler);
        });
      }

      if (wifiBtn && wifiMenu && wifiArrow){
        wifiBtn.addEventListener('click', () => {
          const isHidden = wifiMenu.classList.contains('hidden');
          if (isHidden) { expand(wifiMenu); wifiArrow.classList.add('rotate-180'); wifiBtn.setAttribute('aria-expanded','true'); }
          else          { collapse(wifiMenu); wifiArrow.classList.remove('rotate-180'); wifiBtn.setAttribute('aria-expanded','false'); }
        });
      }

      // ====== Cards stagger entrance ======
      const cards = document.querySelectorAll('.card-anim');
      cards.forEach((el, i) => {
        el.style.animationDelay = (i * 70) + 'ms';
        el.classList.add('animate-fade-in-up');
      });

      // ====== Fayl preview yumshoq anim ======
      window.previewImage = function(inputId, videoId, imageId, durId){
        const input = document.getElementById(inputId);
        const video = document.getElementById(videoId);
        const img   = document.getElementById(imageId);
        if (!input || !video || !img) return;
        const file = input.files && input.files[0];
        if (!file) return;
        const url = URL.createObjectURL(file);
        if (file.type.startsWith('video/')) {
          img.classList.add('hidden'); video.src = url;
          video.classList.remove('hidden'); video.classList.add('animate-scale-in');
        } else if (file.type.startsWith('image/')) {
          video.classList.add('hidden'); img.src = url;
          img.classList.remove('hidden'); img.classList.add('animate-scale-in');
        }
      };

      // ====== Toast helper ======
      const notif = document.getElementById('notifSuccess');
      window.showToast = function (msg = 'SAQLANDI') {
        if (!notif) return;
        notif.textContent = msg;
        notif.classList.remove('pointer-events-none','opacity-0');
        notif.classList.add('opacity-100');
        setTimeout(() => {
          notif.classList.add('opacity-0');
          notif.addEventListener('transitionend', function handler(){
            notif.classList.add('pointer-events-none'); notif.classList.remove('opacity-100');
            notif.removeEventListener('transitionend', handler);
          }, { once:true });
        }, 1600);
      };

      // Tashqi JS #successMessage ni ko'rsatsa, yumshoq yopish
      const successMsg = document.getElementById('successMessage');
      const observer = new MutationObserver(() => {
        if (successMsg && !successMsg.classList.contains('hidden')) {
          successMsg.classList.add('animate-slide-up');
          setTimeout(() => {
            successMsg.classList.add('animate-fade-out');
            successMsg.addEventListener('animationend', function handler() {
              successMsg.classList.add('hidden');
              successMsg.classList.remove('animate-slide-up','animate-fade-out');
              successMsg.removeEventListener('animationend', handler);
            }, { once:true });
          }, 1400);
        }
      });
      successMsg && observer.observe(successMsg, { attributes: true, attributeFilter: ['class'] });
    });
  </script>
</body>
</html>
